<% layout('layout') -%>

<div class="row">
  <div class="col-md-8">
    <h3>Menu</h3>
    <div class="row row-cols-1 row-cols-md-2 g-3">
      <% menu.forEach(item => { %>
        <div class="col">
          <div class="card h-100">
            <div class="card-body d-flex flex-column">
              <h5><%= item.name %> â€” $<%= parseFloat(item.price).toFixed(2) %></h5>
              <p class="mb-2"><%= item.description %></p>
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <div>
                  <input class="form-control form-control-sm item-qty" type="number" value="1" min="1" style="width:80px;display:inline-block;">
                </div>
                <button class="btn btn-primary btn-add" data-id="<%= item.id %>" data-name="<%= item.name %>" data-price="<%= item.price %>">Add</button>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

  <div class="col-md-4">
    <h4>Your Cart</h4>
    <div id="cart-items"></div>
    <div class="mt-3">
      <strong>Total: $<span id="cart-total">0.00</span></strong>
    </div>

    <hr>
    <form id="order-form">
      <div class="mb-2">
        <label>Your name</label>
        <input class="form-control" name="customer_name" required>
      </div>
      <div class="mb-2">
        <label>Phone</label>
        <input class="form-control" name="phone" required>
      </div>
      <input type="hidden" name="items" id="items-field">
      <input type="hidden" name="total" id="total-field">
      <button class="btn btn-success w-100" type="submit">Place Order</button>
    </form>
  </div>
</div>
